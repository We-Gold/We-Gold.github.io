<!DOCTYPE html>
<html lang="en" data-theme="lofi">
  <head>
    <!-- Global Metadata --><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" type="image/png" href="../../favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/svg+xml" href="../../favicon.svg">
<link rel="shortcut icon" href="../../favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="../../apple-touch-icon.png">
<meta name="generator" content="Astro v2.10.15">

<!-- Umami Tracking (privacy friendly) -->
<script async src="https://analytics.umami.is/script.js" data-website-id="69d73ad4-50dc-4889-b0a0-147df4526b30"></script>

<!-- Primary Meta Tags -->
<title>Publishing Java Packages to Maven Central Repository</title>
<meta name="title" content="Publishing Java Packages to Maven Central Repository">
<meta name="description" content="How to successfully navigate the surprisingly tedious process of sharing java packages (using GitHub actions).">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://weavergoldman.com/blog/publishing-maven/">
<meta property="og:title" content="Publishing Java Packages to Maven Central Repository">
<meta property="og:description" content="How to successfully navigate the surprisingly tedious process of sharing java packages (using GitHub actions).">
<!-- <meta property="og:image" content={new URL(image, Astro.url)} /> -->

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://weavergoldman.com/blog/publishing-maven/">
<meta property="twitter:title" content="Publishing Java Packages to Maven Central Repository">
<meta property="twitter:description" content="How to successfully navigate the surprisingly tedious process of sharing java packages (using GitHub actions).">
<!-- <meta property="twitter:image" content={new URL(image, Astro.url)} /> -->
  <link rel="stylesheet" href="../../_astro/404.01b488d5.css" />
<link rel="stylesheet" href="../../_astro/_slug_.af480368.css" /></head>
  <body>
    <div class="bg-base-100 drawer lg:drawer-open">
      <input id="my-drawer" type="checkbox" class="drawer-toggle">
      <div class="drawer-content bg-base-100">
        <div class="sticky lg:hidden top-0 z-30 flex h-16 w-full justify-center bg-opacity-90 backdrop-blur transition-all duration-100 bg-base-100 text-base-content shadow-sm">
  <div class="navbar">
    <div class="navbar-start">
      <label for="my-drawer" class="btn btn-square btn-ghost">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </label>
    </div>
    <div class="navbar-center">
      <a class="btn btn-ghost normal-case text-xl" href="../../">Weaver Goldman</a>
    </div>
    <div class="navbar-end"></div>
  </div>
</div>
        <div class="md:flex md:justify-center">
          <main class="p-6 pt-10 max-w-[900px]">
            
  <main class="md:flex md:justify-center">
    <article class="prose prose-lg max-w-[750px] prose-img:mx-auto">
      <img alt="Publishing Java Packages to Maven Central Repository" class="w-full mb-6" width="750" height="422" src="../../_astro/hero_1cwwg1.webp" loading="lazy" decoding="async">
      <h1 class="title my-2 text-4xl font-bold">Publishing Java Packages to Maven Central Repository</h1>
      <time>Jun 28, 2022</time>
      <br>
      
      
      <div class="divider my-2"></div>
      
    <p>Recently, I migrated my robotics team’s custom libraries from git submodules to importing with gradle, simplifying the process for end-users to utilize our libraries.</p>
<p>Through this project, I discovered the challenge of deploying packages to the Maven Central Repository.</p>
<p>Rather than the simplicity you find with package managers like <code>pip</code> (Python) and <code>npm</code> (JavaScript), I struggled to piece together different steps from tens of articles from varying sources.</p>
<p>To avoid future struggles, I’m creating this article as a full guide to the process.</p>
<p><strong>I will be utilizing features of GitHub actions in this guide. While I recommend the same workflow, other pipelines should be able to achieve similar results.</strong></p>
<h1 id="overview">Overview</h1>
<ol>
<li><a href="#choosing-important-information">Choosing Important Information</a></li>
<li><a href="#creating-a-project-request">Creating a Project Request</a></li>
<li><a href="#creating-a-gpg-signing-key">Creating a GPG Signing Key</a></li>
<li><a href="#storing-secrets-in-the-project-repo">Storing Secrets in the Project Repo</a></li>
<li><a href="#gradle-settings">Gradle Settings</a></li>
<li><a href="#github-action">GitHub Action</a></li>
<li><a href="#releasing-the-archive">Releasing the Archive</a></li>
</ol>
<h2 id="choosing-important-information">Choosing Important Information</h2>
<p>To begin, I would strongly recommend storing all login information for this entire project safely. There will be a lot of information.</p>
<p>I am also assuming that you already have a project that you wish to publish online.</p>
<p>At this point, <strong>choose an email address</strong> to use for the accounts you will need to create.</p>
<p>Additionally, choose a group id from your project. You <strong>must</strong> be able to verify that you own this domain (adding DNS records).</p>
<p><em>Example:</em></p>
<p>My robotics team owns the domain name <a href="https://www.team2539.com">team2539.com</a>. Therefore, we can verify the group id <code>com.team2539</code>.</p>
<p>If you have a github pages website, you could use that, for example, me.github.io becomes <code>io.github.me</code>.</p>
<h2 id="creating-a-project-request">Creating a Project Request</h2>
<p>In order to publish artifacts (library jar files, etc.) to Maven Central, you will need to apply for a new project and a group id to publish it under.</p>
<p><em>Once you complete this process, the group id can be reused for future libraries.</em></p>
<p>Begin by registering for an account on <a href="https://issues.sonatype.org/">issues.sonatype.org</a>. This may sound like a random website, but it is actually the company that manages the maven central repository.</p>
<p>Next, create a new project request by clicking <strong>Create</strong> in the menu. It should look like this:</p>
<!-- {{< figure src="../images/maven_central/project request.png" width="100%" class="shadow">}} -->
<p><img src="../../content/blog/publishing-maven/project-request.png" alt="Project Request"></p>
<p>Most of the required information is self explanatory, like the project url and scm url, where examples are given.</p>
<p>Make sure to list your username in the <code>Username(s)</code> field.</p>
<p>Enter the group id that you selected earlier in the given field.</p>
<p>I’m not certain of the best practices for summary and description.</p>
<p>For the summary I wrote:</p>
<blockquote>
<p>New project request for FIRST robotics library</p>
</blockquote>
<p>And for the description:</p>
<blockquote>
<p>With thousands of FIRST FRC robotics teams around the world, it would be beneficial for teams to be able to easily import a library with all of the features they need to get a robot programmed rapidly.</p>
<p>We have condensed our common code and custom libraries into this library for simple importing into projects.</p>
</blockquote>
<p>Once you <strong>create</strong> the request, a bot will shortly reply with the steps for proving your ownership of your domain.</p>
<p>After you complete these steps, press <strong>respond</strong> to set the ticket to <code>Open</code> again.</p>
<p>It may take a while for you to be verified, so feel free to move on to the next section while you wait.</p>
<hr>
<p>Once you are verified, keep the page available because we will need later in the <a href="#storing-secrets-in-the-project-repo">Storing Secrets in the Project Repo</a> section.</p>
<h2 id="creating-a-gpg-signing-key">Creating a GPG Signing Key</h2>
<p>Publishing packages also requires that they are signed using a GPG key (a frequently used private key format).</p>
<p>To create one, download and install GPG from <a href="https://www.gnupg.org/">www.gnupg.org</a>.</p>
<p>Next, <strong>generate a key</strong> by running:</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #B392F0">gpg</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">--gen-key</span></span></code></pre>
<p><em>Identify the <code>&#x3C;key-id></code>. After generating the key, a long string of letters and numbers should have been printed out to the right (and one line below) <code>pub</code>. The last eight characters of this string serve as the <code>&#x3C;key-id></code>. If you closed the window, you can always run <code>gpg --list-keys</code> to see the key again.</em></p>
<p><strong>Make sure to store the key id and passphrase somewhere so that you can access it in the future.</strong></p>
<p>After creating the key, I recommend setting it to never expire, and do that by running:</p>
<p><em>You may need to type in the passphrase to unlock it.</em></p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #B392F0">gpg</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">--edit-key</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">&#x3C;</span><span style="color: #9ECBFF">key-i</span><span style="color: #E1E4E8">d</span><span style="color: #F97583">></span></span></code></pre>
<p>Now, select the key by typing in the index of the key (if you only have one key, this should just be <code>1</code>).</p>
<p>After selecting it, type <code>expire</code> and enter <code>0</code> to select the <code>key does not expire</code> option.</p>
<p>Now that we have completed key, <strong>we will store it on an online gpg server.</strong></p>
<p>Use the following command to do that:</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #B392F0">gpg</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">--keyserver</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">keyserver.ubuntu.com</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">--send-keys</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">&#x3C;</span><span style="color: #9ECBFF">key-i</span><span style="color: #E1E4E8">d</span><span style="color: #F97583">></span></span></code></pre>
<p>At any time, you can retrieve the key with:</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #B392F0">gpg</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">--keyserver</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">keyserver.ubuntu.com</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">--search-keys</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">&#x3C;</span><span style="color: #9ECBFF">key-i</span><span style="color: #E1E4E8">d</span><span style="color: #F97583">></span></span></code></pre>
<p>Finally, we will <strong>export the key</strong> to an ascii-armored file:</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #B392F0">gpg</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">--export-secret-keys</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">-a</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">&#x3C;</span><span style="color: #9ECBFF">key-i</span><span style="color: #E1E4E8">d</span><span style="color: #F97583">></span><span style="color: #E1E4E8"> </span><span style="color: #F97583">></span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">secret.txt</span></span></code></pre>
<p>We will use the contents of this file in the next step.</p>
<p><strong>Remember, store at least the key id and passphrase permanently, as you will be able to use them to get the key from the key server and access it. I also recommend keeping the ascii-armored file.</strong></p>
<h2 id="storing-secrets-in-the-project-repo">Storing Secrets in the Project Repo</h2>
<p>Later on, in our GitHub action, we will use four pieces of information to sign and publish our artifacts.</p>
<p>This pieces of information are:</p>
<ul>
<li>OSSRH Username and Password</li>
<li>GPG ASCII-armored key and Passphrase</li>
</ul>
<p>Navigate to your project on GitHub, go to <strong>Settings</strong>, and click on <strong>Secrets</strong>, and then <strong>Actions</strong>.</p>
<p>To create a secret, click on <strong>New repository secret</strong>.</p>
<p>We will be creating four secrets, one for each of the pieces of information I listed above.</p>
<h4 id="ossrh-username-and-password">OSSRH Username and Password</h4>
<p><em>The page required for this step will not be available until the project request you made earlier is approved.</em></p>
<ol>
<li>
<p>Navigate to the <a href="https://s01.oss.sonatype.org/">nexus repository manager</a>, and click <strong>Log In</strong> at the top right corner.</p>
</li>
<li>
<p>Enter your <strong>sonatype</strong> username and password here to log in.</p>
</li>
<li>
<p>Next, click on your username at the top right, and select <strong>Profile</strong>.</p>
</li>
<li>
<p>The current page should now display a dropdown that says <strong>Summary</strong>.</p>
</li>
<li>
<p>Click the dropdown and select <strong>User Token</strong>.</p>
</li>
<li>
<p>Press the button titled <strong>Access User Token</strong> and enter your account credentials. This will grant you temporary access to your OSSRH information.</p>
</li>
<li>
<p>Copy the username and password. These will be computer-generated strings separated by a colon ”:“. The first value is the username and the second is the password.</p>
</li>
</ol>
<p>Now that you have collected the credentials, add them as secrets in the GitHub repository.</p>
<p>Store them as <strong>OSSRH_USERNAME</strong> and <strong>OSSRH_TOKEN</strong> (the much longer one is the token).</p>
<h4 id="gpg-ascii-armored-key-and-passphrase">GPG ASCII-armored key and Passphrase</h4>
<ol>
<li>
<p>Copy the contents of <strong>secret.txt</strong> from the <a href="#creating-a-gpg-signing-key">GPG Section</a>, and store it as a GitHub secret called <strong>GPG_SECRET_KEY</strong>.</p>
</li>
<li>
<p>Store the gpg passphrase as a GitHub secret called <strong>GPG_SECRET_KEY_PASSWORD</strong>.</p>
</li>
</ol>
<h2 id="gradle-settings">Gradle Settings</h2>
<p>For this section, you will need to incorporate these different sections into your <code>build.gradle</code> file:</p>
<p><em>This code (some has been cut out) comes from my robotics team’s library: <a href="https://github.com/FRC2539/cougarlib">cougarlib</a>.</em></p>
<p><strong>This is only an example of how to write your <code>build.gradle</code> file, not a guide. Make sure to use documentation and your knowledge of gradle to incorporate different plugins and sections of this file into your own.</strong></p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #E1E4E8">plugins {</span></span>
<span class="line"><span style="color: #E1E4E8">    id </span><span style="color: #9ECBFF">'java-library'</span></span>
<span class="line"><span style="color: #E1E4E8">    id </span><span style="color: #9ECBFF">'maven-publish'</span></span>
<span class="line"><span style="color: #E1E4E8">    id </span><span style="color: #9ECBFF">'signing'</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">allprojects {</span></span>
<span class="line"><span style="color: #E1E4E8">    group </span><span style="color: #9ECBFF">'com.team2539'</span></span>
<span class="line"><span style="color: #E1E4E8">    version </span><span style="color: #9ECBFF">'2022.0.2'</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">    repositories {</span></span>
<span class="line"><span style="color: #E1E4E8">        mavenCentral()</span></span>
<span class="line"><span style="color: #E1E4E8">    }</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">java {</span></span>
<span class="line"><span style="color: #E1E4E8">    withJavadocJar()</span></span>
<span class="line"><span style="color: #E1E4E8">    withSourcesJar()</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">publishing {</span></span>
<span class="line"><span style="color: #E1E4E8">    publications {</span></span>
<span class="line"><span style="color: #E1E4E8">        mavenJava(</span><span style="color: #F97583">MavenPublication</span><span style="color: #E1E4E8">) {</span></span>
<span class="line"><span style="color: #E1E4E8">            from components</span><span style="color: #F97583">.</span><span style="color: #E1E4E8">java</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">            pom {</span></span>
<span class="line"><span style="color: #E1E4E8">                name </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">'cougarlib'</span></span>
<span class="line"><span style="color: #E1E4E8">                description </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">'A library containing the common code for our java robots.'</span></span>
<span class="line"><span style="color: #E1E4E8">                url </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">'https://github.com/FRC2539/cougarlib'</span></span>
<span class="line"><span style="color: #E1E4E8">                licenses {</span></span>
<span class="line"><span style="color: #E1E4E8">                    license {</span></span>
<span class="line"><span style="color: #E1E4E8">                        name </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">'MIT License'</span></span>
<span class="line"><span style="color: #E1E4E8">                        url </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">'https://github.com/FRC2539/cougarlib/blob/main/LICENSE'</span></span>
<span class="line"><span style="color: #E1E4E8">                    }</span></span>
<span class="line"><span style="color: #E1E4E8">                }</span></span>
<span class="line"><span style="color: #E1E4E8">                developers {</span></span>
<span class="line"><span style="color: #E1E4E8">                    developer {</span></span>
<span class="line"><span style="color: #E1E4E8">                        id </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">'we-gold'</span></span>
<span class="line"><span style="color: #E1E4E8">                        name </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">'Weaver Goldman'</span></span>
<span class="line"><span style="color: #E1E4E8">                        email </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">'we.goldm@gmail.com'</span></span>
<span class="line"><span style="color: #E1E4E8">                    }</span></span>
<span class="line"><span style="color: #E1E4E8">                }</span></span>
<span class="line"><span style="color: #E1E4E8">                scm {</span></span>
<span class="line"><span style="color: #E1E4E8">                    connection </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">'scm:git:git://github.com/FRC2539/cougarlib.git'</span></span>
<span class="line"><span style="color: #E1E4E8">                    developerConnection </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">'scm:git:ssh://github.com/FRC2539/cougarlib.git'</span></span>
<span class="line"><span style="color: #E1E4E8">                    url </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">'https://github.com/FRC2539/cougarlib'</span></span>
<span class="line"><span style="color: #E1E4E8">                }</span></span>
<span class="line"><span style="color: #E1E4E8">            }</span></span>
<span class="line"><span style="color: #E1E4E8">        }</span></span>
<span class="line"><span style="color: #E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">    repositories {</span></span>
<span class="line"><span style="color: #E1E4E8">        maven {</span></span>
<span class="line"><span style="color: #E1E4E8">            url </span><span style="color: #9ECBFF">"https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/"</span></span>
<span class="line"><span style="color: #E1E4E8">            credentials {</span></span>
<span class="line"><span style="color: #E1E4E8">                username </span><span style="color: #F97583">System.</span><span style="color: #E1E4E8">getenv(</span><span style="color: #9ECBFF">"MAVEN_USERNAME"</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">                password </span><span style="color: #F97583">System.</span><span style="color: #E1E4E8">getenv(</span><span style="color: #9ECBFF">"MAVEN_PASSWORD"</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">            }</span></span>
<span class="line"><span style="color: #E1E4E8">        }</span></span>
<span class="line"><span style="color: #E1E4E8">    }</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">signing {</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #F97583">def</span><span style="color: #E1E4E8"> signingKey </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> findProperty(</span><span style="color: #9ECBFF">"signingKey"</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #F97583">def</span><span style="color: #E1E4E8"> signingPassword </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> findProperty(</span><span style="color: #9ECBFF">"signingPassword"</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">    useInMemoryPgpKeys(signingKey, signingPassword)</span></span>
<span class="line"><span style="color: #E1E4E8">    sign publishing</span><span style="color: #F97583">.</span><span style="color: #E1E4E8">publications</span><span style="color: #F97583">.</span><span style="color: #E1E4E8">mavenJava</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre>
<p><em>Note: <code>repositories > maven > url</code> should be correct already, and unless the servers change, you can keep this same url.</em></p>
<h2 id="github-action">GitHub Action</h2>
<p><em>If you are trying to publish an FRC package like me, feel free to look at the code for the library linked in the previous section. The code may be slightly different from that presented here.</em></p>
<details class="mb-3">
<summary><strong>Click here to see code specific to FRC robotics libraries</strong></summary>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #85E89D">name</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">Publish package to Maven Central</span></span>
<span class="line"><span style="color: #79B8FF">on</span><span style="color: #E1E4E8">:</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #85E89D">release</span><span style="color: #E1E4E8">:</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #85E89D">types</span><span style="color: #E1E4E8">: [</span><span style="color: #9ECBFF">created</span><span style="color: #E1E4E8">]</span></span>
<span class="line"><span style="color: #85E89D">jobs</span><span style="color: #E1E4E8">:</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #85E89D">publish</span><span style="color: #E1E4E8">:</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #85E89D">runs-on</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">ubuntu-latest</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #85E89D">container</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">wpilib/roborio-cross-ubuntu:2022-18.04</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #85E89D">permissions</span><span style="color: #E1E4E8">:</span></span>
<span class="line"><span style="color: #E1E4E8">            </span><span style="color: #85E89D">contents</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">read</span></span>
<span class="line"><span style="color: #E1E4E8">            </span><span style="color: #85E89D">packages</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">write</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #85E89D">steps</span><span style="color: #E1E4E8">:</span></span>
<span class="line"><span style="color: #E1E4E8">            - </span><span style="color: #85E89D">uses</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">actions/checkout@v3</span></span>
<span class="line"><span style="color: #E1E4E8">            - </span><span style="color: #85E89D">name</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">Grant execute permission for gradlew</span></span>
<span class="line"><span style="color: #E1E4E8">              </span><span style="color: #85E89D">run</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">chmod +x gradlew</span></span>
<span class="line"><span style="color: #E1E4E8">            - </span><span style="color: #85E89D">name</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">Validate Gradle wrapper</span></span>
<span class="line"><span style="color: #E1E4E8">              </span><span style="color: #85E89D">uses</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">gradle/wrapper-validation-action@e6e38bacfdf1a337459f332974bb2327a31aaf4b</span></span>
<span class="line"><span style="color: #E1E4E8">            - </span><span style="color: #85E89D">name</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">Publish package</span></span>
<span class="line"><span style="color: #E1E4E8">              </span><span style="color: #85E89D">uses</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">gradle/gradle-build-action@0d13054264b0bb894ded474f08ebb30921341cee</span></span>
<span class="line"><span style="color: #E1E4E8">              </span><span style="color: #85E89D">with</span><span style="color: #E1E4E8">:</span></span>
<span class="line"><span style="color: #E1E4E8">                  </span><span style="color: #85E89D">arguments</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">publish</span></span>
<span class="line"><span style="color: #E1E4E8">                  </span><span style="color: #85E89D">gradle-executable</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">./gradlew</span></span>
<span class="line"><span style="color: #E1E4E8">              </span><span style="color: #85E89D">env</span><span style="color: #E1E4E8">:</span></span>
<span class="line"><span style="color: #E1E4E8">                  </span><span style="color: #85E89D">MAVEN_USERNAME</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">${{ secrets.OSSRH_USERNAME }}</span></span>
<span class="line"><span style="color: #E1E4E8">                  </span><span style="color: #85E89D">MAVEN_PASSWORD</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">${{ secrets.OSSRH_TOKEN }}</span></span>
<span class="line"><span style="color: #E1E4E8">                  </span><span style="color: #85E89D">ORG_GRADLE_PROJECT_signingKey</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">${{ secrets.GPG_SECRET_KEY }}</span></span>
<span class="line"><span style="color: #E1E4E8">                  </span><span style="color: #85E89D">ORG_GRADLE_PROJECT_signingPassword</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">${{ secrets.GPG_SECRET_KEY_PASSWORD }}</span></span></code></pre>
</details>
<p>Create a file in <code>.github/workflows</code> (in your repository) called <code>publish.yml</code>. This will be run as your GitHub action.</p>
<p>Use the following contents (with any modifications you need) for that file:</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #85E89D">name</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">Publish package to Maven Central</span></span>
<span class="line"><span style="color: #79B8FF">on</span><span style="color: #E1E4E8">:</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #85E89D">release</span><span style="color: #E1E4E8">:</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #85E89D">types</span><span style="color: #E1E4E8">: [</span><span style="color: #9ECBFF">created</span><span style="color: #E1E4E8">]</span></span>
<span class="line"><span style="color: #85E89D">jobs</span><span style="color: #E1E4E8">:</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #85E89D">publish</span><span style="color: #E1E4E8">:</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #85E89D">runs-on</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">ubuntu-latest</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #85E89D">permissions</span><span style="color: #E1E4E8">:</span></span>
<span class="line"><span style="color: #E1E4E8">            </span><span style="color: #85E89D">contents</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">read</span></span>
<span class="line"><span style="color: #E1E4E8">            </span><span style="color: #85E89D">packages</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">write</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #85E89D">steps</span><span style="color: #E1E4E8">:</span></span>
<span class="line"><span style="color: #E1E4E8">            - </span><span style="color: #85E89D">uses</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">actions/checkout@v3</span></span>
<span class="line"><span style="color: #E1E4E8">            - </span><span style="color: #85E89D">name</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">Set up Java</span></span>
<span class="line"><span style="color: #E1E4E8">              </span><span style="color: #85E89D">uses</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">actions/setup-java@v3</span></span>
<span class="line"><span style="color: #E1E4E8">              </span><span style="color: #85E89D">with</span><span style="color: #E1E4E8">:</span></span>
<span class="line"><span style="color: #E1E4E8">                  </span><span style="color: #85E89D">java-version</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">"11"</span></span>
<span class="line"><span style="color: #E1E4E8">                  </span><span style="color: #85E89D">distribution</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">"adopt"</span></span>
<span class="line"><span style="color: #E1E4E8">            - </span><span style="color: #85E89D">name</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">Validate Gradle wrapper</span></span>
<span class="line"><span style="color: #E1E4E8">              </span><span style="color: #85E89D">uses</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">gradle/wrapper-validation-action@e6e38bacfdf1a337459f332974bb2327a31aaf4b</span></span>
<span class="line"><span style="color: #E1E4E8">            - </span><span style="color: #85E89D">name</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">Publish package</span></span>
<span class="line"><span style="color: #E1E4E8">              </span><span style="color: #85E89D">uses</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">gradle/gradle-build-action@0d13054264b0bb894ded474f08ebb30921341cee</span></span>
<span class="line"><span style="color: #E1E4E8">              </span><span style="color: #85E89D">with</span><span style="color: #E1E4E8">:</span></span>
<span class="line"><span style="color: #E1E4E8">                  </span><span style="color: #85E89D">arguments</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">publish</span></span>
<span class="line"><span style="color: #E1E4E8">              </span><span style="color: #85E89D">env</span><span style="color: #E1E4E8">:</span></span>
<span class="line"><span style="color: #E1E4E8">                  </span><span style="color: #85E89D">MAVEN_USERNAME</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">${{ secrets.OSSRH_USERNAME }}</span></span>
<span class="line"><span style="color: #E1E4E8">                  </span><span style="color: #85E89D">MAVEN_PASSWORD</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">${{ secrets.OSSRH_TOKEN }}</span></span>
<span class="line"><span style="color: #E1E4E8">                  </span><span style="color: #85E89D">ORG_GRADLE_PROJECT_signingKey</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">${{ secrets.GPG_SECRET_KEY }}</span></span>
<span class="line"><span style="color: #E1E4E8">                  </span><span style="color: #85E89D">ORG_GRADLE_PROJECT_signingPassword</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">${{ secrets.GPG_SECRET_KEY_PASSWORD }}</span></span></code></pre>
<h2 id="releasing-the-archive">Releasing the Archive</h2>
<p>There will be two parts to this final section: creating a release in GitHub and publishing it on nexus repository manager.</p>
<h4 id="creating-a-github-release">Creating a GitHub Release</h4>
<p>Go to your GitHub repository and click on the <strong>Releases</strong>.</p>
<p>If you have none, there will be a button to <strong>Create a new release</strong>. Otherwise there is a button labelled <strong>Draft a new release</strong>.</p>
<p>Press whichever button is present, and create a new release.</p>
<p><em>For both the tag and name of release, I recommend just using the current verion number that you have in your <code>build.gradle</code>.</em></p>
<p>Now, your GitHub action will automatically run!</p>
<p><strong>If the action fails, try debugging, and if you cannot identify the source of the problem, feel free to leave a comment below and I will try to assist.</strong></p>
<h4 id="releasing-the-archive-1">Releasing the Archive</h4>
<p>Navigate back to the <a href="https://s01.oss.sonatype.org/">Nexus Repository Manager</a> and log in.</p>
<p>In the left-hand menu, click <strong>Staging Repositories</strong> under <strong>Build Promotion</strong>.</p>
<p><em>If you have already created your release and there is still nothing here after some time, there was likely a problem in the GitHub action.</em></p>
<p>Click on the item in here; you should recognize it by the group id you registered earlier.</p>
<p>Now, press <strong>Close</strong> from the menu, and wait a couple minutes for the server to process your archive.</p>
<p><strong>It should say that all tasks have run successfully, but if anything failed, try to debug first, and if you are unable to identify the source of the problem, feel free to leave a comment below and I will try to assist.</strong></p>
<p>Assuming that everything was successfully completed, press <strong>Release</strong> and the repository will be published to Maven Central.</p>
<p>After a while (this can take hours), the package will be available to use.</p>
<p>To use it, implement the following template (in <code>build.gradle</code>):</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #E1E4E8">repositories {</span></span>
<span class="line"><span style="color: #E1E4E8">    mavenCentral()</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">dependencies {</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #F97583">..</span><span style="color: #E1E4E8">.</span></span>
<span class="line"><span style="color: #E1E4E8">    implementation </span><span style="color: #9ECBFF">'&#x3C;group-id>:&#x3C;artifact-id>:&#x3C;version>'</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #F97583">..</span><span style="color: #E1E4E8">.</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre>
<p>Congratulations on making your first package!</p>
<p>Leave any questions or feedback in the comments below.</p>

    </article>
  </main>

          </main>
        </div>
        <footer class="footer footer-center block mb-5 pt-10">
  <div class="pb-2">
    &copy; 2025 Weaver Goldman
  </div>
</footer>
      </div>
      <div class="drawer-side z-40">
  <label for="my-drawer" class="drawer-overlay"></label>
  <aside class="px-2 pt-2 h-auto min-h-full w-[19rem] bg-base-200 text-base-content flex flex-col">
    <div class="w-fit mx-auto mt-5 mb-6">
      <a href="../../">
        <div class="avatar transition ease-in-out hover:scale-[102%] block m-auto">
          <div class="w-[8.5rem]">
            <img class="mask mask-circle" alt="Profile image" width="350" height="350" src="../../_astro/profile_2anlPl.webp" loading="lazy" decoding="async">
          </div>
        </div>
      </a>
    </div>
    <ul class="menu grow shrink menu-md overflow-y-auto">
    <li><a class="py-3 text-base" id="home" href="../../">Home</a></li>
    <li><a class="py-3 text-base" id="projects" href="../../projects">Projects</a></li>
    <!--<li><a class="py-3 text-base" id="services" href="../../services">Services</a></li>-->
    <li><a class="py-3 text-base" id="blog" href="../../blog/">Blog</a></li>
    <li><a class="py-3 text-base" id="cv" href="../../cv">CV</a></li>
    <li>
        <a class="py-3 text-base" href="mailto:we.goldm@gmail.com" target="_blank" referrerpolicy="no-referrer-when-downgrade">Email</a>
    </li>
</ul>

<script>(function(){const sideBarActiveItemID = undefined;
const activeClass = "bg-base-300";

const activeItemElem = document.getElementById(sideBarActiveItemID);
activeItemElem.classList.add(activeClass);
})();</script>
    <div class="block sticky pointer-events-none bottom-10 bg-base-200 justify-center h-12 [mask-image:linear-gradient(transparent,#000000)]">
</div>

<div class="social-icons px-4 pb-5 pt-1 flex self-center justify-center sticky bottom-0 bg-base-200">
	<a href="https://github.com/We-Gold" target="_blank" class="mx-3" aria-label="Github" title="Github">
		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: currentColor;transform: ;msFilter:;"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.026 2c-5.509 0-9.974 4.465-9.974 9.974 0 4.406 2.857 8.145 6.821 9.465.499.09.679-.217.679-.481 0-.237-.008-.865-.011-1.696-2.775.602-3.361-1.338-3.361-1.338-.452-1.152-1.107-1.459-1.107-1.459-.905-.619.069-.605.069-.605 1.002.07 1.527 1.028 1.527 1.028.89 1.524 2.336 1.084 2.902.829.091-.645.351-1.085.635-1.334-2.214-.251-4.542-1.107-4.542-4.93 0-1.087.389-1.979 1.024-2.675-.101-.253-.446-1.268.099-2.64 0 0 .837-.269 2.742 1.021a9.582 9.582 0 0 1 2.496-.336 9.554 9.554 0 0 1 2.496.336c1.906-1.291 2.742-1.021 2.742-1.021.545 1.372.203 2.387.099 2.64.64.696 1.024 1.587 1.024 2.675 0 3.833-2.33 4.675-4.552 4.922.355.308.675.916.675 1.846 0 1.334-.012 2.41-.012 2.737 0 .267.178.577.687.479C19.146 20.115 22 16.379 22 11.974 22 6.465 17.535 2 12.026 2z"></path>
		</svg>
	</a>
	<a href="https://www.linkedin.com/in/weaver-goldman/" target="_blank" class="mx-3" aria-label="Linkedin" title="Linkedin">
		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: currentColor;transform: ;msFilter:;"><circle cx="4.983" cy="5.009" r="2.188"></circle><path d="M9.237 8.855v12.139h3.769v-6.003c0-1.584.298-3.118 2.262-3.118 1.937 0 1.961 1.811 1.961 3.218v5.904H21v-6.657c0-3.27-.704-5.783-4.526-5.783-1.835 0-3.065 1.007-3.568 1.96h-.051v-1.66H9.237zm-6.142 0H6.87v12.139H3.095z"></path>
		</svg>
	</a>
	<a href="https://x.com/GoldMonster9" target="_blank" class="mx-3" aria-label="Twitter" title="Twitter">
		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: currentColor;transform: ;msFilter:;"><path d="M19.633 7.997c.013.175.013.349.013.523 0 5.325-4.053 11.461-11.46 11.461-2.282 0-4.402-.661-6.186-1.809.324.037.636.05.973.05a8.07 8.07 0 0 0 5.001-1.721 4.036 4.036 0 0 1-3.767-2.793c.249.037.499.062.761.062.361 0 .724-.05 1.061-.137a4.027 4.027 0 0 1-3.23-3.953v-.05c.537.299 1.16.486 1.82.511a4.022 4.022 0 0 1-1.796-3.354c0-.748.199-1.434.548-2.032a11.457 11.457 0 0 0 8.306 4.215c-.062-.3-.1-.611-.1-.923a4.026 4.026 0 0 1 4.028-4.028c1.16 0 2.207.486 2.943 1.272a7.957 7.957 0 0 0 2.556-.973 4.02 4.02 0 0 1-1.771 2.22 8.073 8.073 0 0 0 2.319-.624 8.645 8.645 0 0 1-2.019 2.083z"></path>
		</svg>
	</a>
	<a href="../../rss.xml" target="_blank" class="mx-3" aria-label="RSS Feed" title="RSS Feed">
		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: currentColor;transform: ;msFilter:;"><path d="M19 20.001C19 11.729 12.271 5 4 5v2c7.168 0 13 5.832 13 13.001h2z"></path><path d="M12 20.001h2C14 14.486 9.514 10 4 10v2c4.411 0 8 3.589 8 8.001z"></path><circle cx="6" cy="18" r="2"></circle>
		</svg>
	</a>
</div>
  </aside>
</div>
    </div>
  </body>
</html>