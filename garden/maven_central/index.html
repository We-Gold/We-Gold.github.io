<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href=/css/fonts.css rel=stylesheet><link rel=stylesheet type=text/css href=/css/bootstrap.min.css><link rel=stylesheet type=text/css href=/css/all.min.css><link disabled id=dark-mode-theme rel=stylesheet href=/css/dark.css><link rel=stylesheet type=text/css href=/css/style.css><link rel=stylesheet type=text/css href=/css/custom.css><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=icon type=image/x-icon href=/favicon.ico><title>Weaver Goldman | Publishing Java Packages to Maven Central Repository</title><meta name=description content="How to successfully navigate the surprisingly tedious process of sharing java packages (using GitHub actions)."></head><body><nav class="navbar navbar-expand-lg navbar-light bg-light"><div class=container><a class=navbar-brand href=https://we-gold.github.io><b style=font-weight:800>WG</b></a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNavDropdown aria-controls=navbarNavDropdown aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarNavDropdown><ul class="navbar-nav ms-auto mt-2 mt-lg-0"><li class=nav-item><a class=nav-link href=/garden/>Digital Garden</a></li><li class=nav-item><a class=nav-link href=/projects/>Projects</a></li><li class=nav-item><a class=nav-link href=/about/>About</a></li><li class="nav-item px-2 pt-1"><a class="btn fas fa-moon" id=dark-mode-toggle></a></li></ul></div></div></nav><div id=content><div class=container style=max-width:800px><div class="py-4 rounded-3"><div class="container-fluid py-2"><h1 class="display-2 mb-4 text-center">Publishing Java Packages to Maven Central Repository</h1></div><p class="text-center fs-4 fst-italic serif">How to successfully navigate the surprisingly tedious process of sharing java packages (using GitHub actions).</p><div class="text-center pt-4"></div></div><div class="row justify-content-center mb-5"><div class=col-12><p class="card-date m-0">Created Jun 28, 2022 -
Last updated: Jun 28, 2022</p><hr class=dropdown-divider><div class="row justify-content-between"><div class=col-sm-4><span class=status>Seeding ðŸŒ±</span></div><div class=col-sm-8 style=text-align:right><span class="badge tag-badge">java</span>
<span class="badge tag-badge">robotics</span>
<span class="badge tag-badge">git</span></div></div></div></div><div class="container-fluid py-2"><div class="serif main-content"><p>Recently, I migrated my robotics team&rsquo;s custom libraries from git submodules to importing with gradle, simplifying the process for end-users to utilize our libraries.</p><p>Through this project, I discovered the challenge of deploying packages to the Maven Central Repository.</p><p>Rather than the simplicity you find with package managers like <code>pip</code> (Python) and <code>npm</code> (JavaScript), I struggled to piece together different steps from tens of articles from varying sources.</p><p>To avoid future struggles, I&rsquo;m creating this article as a full guide to the process.</p><p><strong>I will be utilizing features of GitHub actions in this guide. While I recommend the same workflow, other pipelines should be able to achieve similar results.</strong></p><h1 id=overview>Overview</h1><ol><li><a href=#choosing-important-information>Choosing Important Information</a></li><li><a href=#creating-a-project-request>Creating a Project Request</a></li><li><a href=#creating-a-gpg-signing-key>Creating a GPG Signing Key</a></li><li><a href=#storing-secrets-in-the-project-repo>Storing Secrets in the Project Repo</a></li><li><a href=#gradle-settings>Gradle Settings</a></li><li><a href=#github-action>GitHub Action</a></li><li><a href=#releasing-the-archive>Releasing the Archive</a></li></ol><h2 id=choosing-important-information>Choosing Important Information</h2><p>To begin, I would strongly recommend storing all login information for this entire project safely. There will be a lot of information.</p><p>I am also assuming that you already have a project that you wish to publish online.</p><p>At this point, <strong>choose an email address</strong> to use for the accounts you will need to create.</p><p>Additionally, choose a group id from your project. You <strong>must</strong> be able to verify that you own this domain (adding DNS records).</p><p><em>Example:</em></p><p>My robotics team owns the domain name <a href=https://www.team2539.com>team2539.com</a>. Therefore, we can verify the group id <code>com.team2539</code>.</p><p>If you have a github pages website, you could use that, for example, me.github.io becomes <code>io.github.me</code>.</p><h2 id=creating-a-project-request>Creating a Project Request</h2><p>In order to publish artifacts (library jar files, etc.) to Maven Central, you will need to apply for a new project and a group id to publish it under.</p><p><em>Once you complete this process, the group id can be reused for future libraries.</em></p><p>Begin by registering for an account on <a href=https://issues.sonatype.org/>issues.sonatype.org</a>. This may sound like a random website, but it is actually the company that manages the maven central repository.</p><p>Next, create a new project request by clicking <strong>Create</strong> in the menu. It should look like this:</p><figure class=shadow><img src=../images/maven_central/project%20request.png width=100%></figure><p>Most of the required information is self explanatory, like the project url and scm url, where examples are given.</p><p>Make sure to list your username in the <code>Username(s)</code> field.</p><p>Enter the group id that you selected earlier in the given field.</p><p>I&rsquo;m not certain of the best practices for summary and description.</p><p>For the summary I wrote:</p><blockquote><p>New project request for FIRST robotics library</p></blockquote><p>And for the description:</p><blockquote><p>With thousands of FIRST FRC robotics teams around the world, it would be beneficial for teams to be able to easily import a library with all of the features they need to get a robot programmed rapidly.</p><p>We have condensed our common code and custom libraries into this library for simple importing into projects.</p></blockquote><p>Once you <strong>create</strong> the request, a bot will shortly reply with the steps for proving your ownership of your domain.</p><p>After you complete these steps, press <strong>respond</strong> to set the ticket to <code>Open</code> again.</p><p>It may take a while for you to be verified, so feel free to move on to the next section while you wait.</p><hr><p>Once you are verified, keep the page available because we will need later in the <a href=#storing-secrets-in-the-project-repo>Storing Secrets in the Project Repo</a> section.</p><h2 id=creating-a-gpg-signing-key>Creating a GPG Signing Key</h2><p>Publishing packages also requires that they are signed using a GPG key (a frequently used private key format).</p><p>To create one, download and install GPG from <a href=https://www.gnupg.org/>www.gnupg.org</a>.</p><p>Next, <strong>generate a key</strong> by running:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gpg --gen-key
</span></span></code></pre></div><p><em>Identify the <code>&lt;key-id></code>. After generating the key, a long string of letters and numbers should have been printed out to the right (and one line below) <code>pub</code>. The last eight characters of this string serve as the <code>&lt;key-id></code>. If you closed the window, you can always run <code>gpg --list-keys</code> to see the key again.</em></p><p><strong>Make sure to store the key id and passphrase somewhere so that you can access it in the future.</strong></p><p>After creating the key, I recommend setting it to never expire, and do that by running:</p><p><em>You may need to type in the passphrase to unlock it.</em></p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gpg --edit-key &lt;key-id&gt;
</span></span></code></pre></div><p>Now, select the key by typing in the index of the key (if you only have one key, this should just be <code>1</code>).</p><p>After selecting it, type <code>expire</code> and enter <code>0</code> to select the <code>key does not expire</code> option.</p><p>Now that we have completed key, <strong>we will store it on an online gpg server.</strong></p><p>Use the following command to do that:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gpg --keyserver keyserver.ubuntu.com --send-keys &lt;key-id&gt;
</span></span></code></pre></div><p>At any time, you can retrieve the key with:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gpg --keyserver keyserver.ubuntu.com --search-keys &lt;key-id&gt;
</span></span></code></pre></div><p>Finally, we will <strong>export the key</strong> to an ascii-armored file:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gpg --export-secret-keys -a &lt;key-id&gt; &gt; secret.txt
</span></span></code></pre></div><p>We will use the contents of this file in the next step.</p><p><strong>Remember, store at least the key id and passphrase permanently, as you will be able to use them to get the key from the key server and access it. I also recommend keeping the ascii-armored file.</strong></p><h2 id=storing-secrets-in-the-project-repo>Storing Secrets in the Project Repo</h2><p>Later on, in our GitHub action, we will use four pieces of information to sign and publish our artifacts.</p><p>This pieces of information are:</p><ul><li>OSSRH Username and Password</li><li>GPG ASCII-armored key and Passphrase</li></ul><p>Navigate to your project on GitHub, go to <strong>Settings</strong>, and click on <strong>Secrets</strong>, and then <strong>Actions</strong>.</p><p>To create a secret, click on <strong>New repository secret</strong>.</p><p>We will be creating four secrets, one for each of the pieces of information I listed above.</p><h4 id=ossrh-username-and-password>OSSRH Username and Password</h4><p><em>The page required for this step will not be available until the project request you made earlier is approved.</em></p><ol><li><p>Navigate to the <a href=https://s01.oss.sonatype.org/>nexus repository manager</a>, and click <strong>Log In</strong> at the top right corner.</p></li><li><p>Enter your <strong>sonatype</strong> username and password here to log in.</p></li><li><p>Next, click on your username at the top right, and select <strong>Profile</strong>.</p></li><li><p>The current page should now display a dropdown that says <strong>Summary</strong>.</p></li><li><p>Click the dropdown and select <strong>User Token</strong>.</p></li><li><p>Press the button titled <strong>Access User Token</strong> and enter your account credentials. This will grant you temporary access to your OSSRH information.</p></li><li><p>Copy the username and password. These will be computer-generated strings separated by a colon &ldquo;:&rdquo;. The first value is the username and the second is the password.</p></li></ol><p>Now that you have collected the credentials, add them as secrets in the GitHub repository.</p><p>Store them as <strong>OSSRH_USERNAME</strong> and <strong>OSSRH_TOKEN</strong> (the much longer one is the token).</p><h4 id=gpg-ascii-armored-key-and-passphrase>GPG ASCII-armored key and Passphrase</h4><ol><li><p>Copy the contents of <strong>secret.txt</strong> from the <a href=#creating-a-gpg-signing-key>GPG Section</a>, and store it as a GitHub secret called <strong>GPG_SECRET_KEY</strong>.</p></li><li><p>Store the gpg passphrase as a GitHub secret called <strong>GPG_SECRET_KEY_PASSWORD</strong>.</p></li></ol><h2 id=gradle-settings>Gradle Settings</h2><p>For this section, you will need to incorporate these different sections into your <code>build.gradle</code> file:</p><p><em>This code (some has been cut out) comes from my robotics team&rsquo;s library: <a href=https://github.com/FRC2539/cougarlib>cougarlib</a>.</em></p><p><strong>This is only an example of how to write your <code>build.gradle</code> file, not a guide. Make sure to use documentation and your knowledge of gradle to incorporate different plugins and sections of this file into your own.</strong></p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-groovy data-lang=groovy><span style=display:flex><span><span style=color:#111>plugins</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>id</span> <span style=color:#d88200>&#39;java-library&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#111>id</span> <span style=color:#d88200>&#39;maven-publish&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#111>id</span> <span style=color:#d88200>&#39;signing&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>allprojects</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>group</span> <span style=color:#d88200>&#39;com.team2539&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#111>version</span> <span style=color:#d88200>&#39;2022.0.2&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#111>repositories</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>mavenCentral</span><span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>java</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>withJavadocJar</span><span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>    <span style=color:#111>withSourcesJar</span><span style=color:#f92672>()</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>publishing</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>publications</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>mavenJava</span><span style=color:#f92672>(</span><span style=color:#111>MavenPublication</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>from</span> <span style=color:#111>components</span><span style=color:#f92672>.</span><span style=color:#75af00>java</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#111>pom</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;cougarlib&#39;</span>
</span></span><span style=display:flex><span>                <span style=color:#111>description</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;A library containing the common code for our java robots.&#39;</span>
</span></span><span style=display:flex><span>                <span style=color:#111>url</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;https://github.com/FRC2539/cougarlib&#39;</span>
</span></span><span style=display:flex><span>                <span style=color:#111>licenses</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#111>license</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                        <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;MIT License&#39;</span>
</span></span><span style=display:flex><span>                        <span style=color:#111>url</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;https://github.com/FRC2539/cougarlib/blob/main/LICENSE&#39;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                <span style=color:#111>developers</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#111>developer</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                        <span style=color:#111>id</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;we-gold&#39;</span>
</span></span><span style=display:flex><span>                        <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;Weaver Goldman&#39;</span>
</span></span><span style=display:flex><span>                        <span style=color:#111>email</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;we.goldm@gmail.com&#39;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                <span style=color:#111>scm</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#111>connection</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;scm:git:git://github.com/FRC2539/cougarlib.git&#39;</span>
</span></span><span style=display:flex><span>                    <span style=color:#111>developerConnection</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;scm:git:ssh://github.com/FRC2539/cougarlib.git&#39;</span>
</span></span><span style=display:flex><span>                    <span style=color:#111>url</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;https://github.com/FRC2539/cougarlib&#39;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#111>repositories</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>maven</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>url</span> <span style=color:#d88200>&#34;https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#111>credentials</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#111>username</span> <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>getenv</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;MAVEN_USERNAME&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                <span style=color:#111>password</span> <span style=color:#111>System</span><span style=color:#f92672>.</span><span style=color:#75af00>getenv</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;MAVEN_PASSWORD&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>signing</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>def</span> <span style=color:#111>signingKey</span> <span style=color:#f92672>=</span> <span style=color:#111>findProperty</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;signingKey&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>def</span> <span style=color:#111>signingPassword</span> <span style=color:#f92672>=</span> <span style=color:#111>findProperty</span><span style=color:#f92672>(</span><span style=color:#d88200>&#34;signingPassword&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>useInMemoryPgpKeys</span><span style=color:#f92672>(</span><span style=color:#111>signingKey</span><span style=color:#f92672>,</span> <span style=color:#111>signingPassword</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>sign</span> <span style=color:#111>publishing</span><span style=color:#f92672>.</span><span style=color:#75af00>publications</span><span style=color:#f92672>.</span><span style=color:#75af00>mavenJava</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><em>Note: <code>repositories > maven > url</code> should be correct already, and unless the servers change, you can keep this same url.</em></p><h2 id=github-action>GitHub Action</h2><p><em>If you are trying to publish an FRC package like me, feel free to look at the code for the library linked in the previous section. The code may be slightly different from that presented here.</em></p><details class=mb-3><summary><strong>Click here to see code specific to FRC robotics libraries</strong></summary><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span><span style=color:#111>:</span> <span style=color:#ae81ff>Publish package to Maven Central</span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>release</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>types</span><span style=color:#111>:</span> <span style=color:#111>[</span><span style=color:#ae81ff>created]</span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>publish</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>runs-on</span><span style=color:#111>:</span> <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>container</span><span style=color:#111>:</span> <span style=color:#ae81ff>wpilib/roborio-cross-ubuntu:2022-18.04</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>permissions</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>contents</span><span style=color:#111>:</span> <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>packages</span><span style=color:#111>:</span> <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>steps</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>            - <span style=color:#f92672>uses</span><span style=color:#111>:</span> <span style=color:#ae81ff>actions/checkout@v3</span>
</span></span><span style=display:flex><span>            - <span style=color:#f92672>name</span><span style=color:#111>:</span> <span style=color:#ae81ff>Grant execute permission for gradlew</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>run</span><span style=color:#111>:</span> <span style=color:#ae81ff>chmod +x gradlew</span>
</span></span><span style=display:flex><span>            - <span style=color:#f92672>name</span><span style=color:#111>:</span> <span style=color:#ae81ff>Validate Gradle wrapper</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>uses</span><span style=color:#111>:</span> <span style=color:#ae81ff>gradle/wrapper-validation-action@e6e38bacfdf1a337459f332974bb2327a31aaf4b</span>
</span></span><span style=display:flex><span>            - <span style=color:#f92672>name</span><span style=color:#111>:</span> <span style=color:#ae81ff>Publish package</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>uses</span><span style=color:#111>:</span> <span style=color:#ae81ff>gradle/gradle-build-action@0d13054264b0bb894ded474f08ebb30921341cee</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>with</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>arguments</span><span style=color:#111>:</span> <span style=color:#ae81ff>publish</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>gradle-executable</span><span style=color:#111>:</span> <span style=color:#ae81ff>./gradlew</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>env</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>MAVEN_USERNAME</span><span style=color:#111>:</span> <span style=color:#ae81ff>${{ secrets.OSSRH_USERNAME }}</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>MAVEN_PASSWORD</span><span style=color:#111>:</span> <span style=color:#ae81ff>${{ secrets.OSSRH_TOKEN }}</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>ORG_GRADLE_PROJECT_signingKey</span><span style=color:#111>:</span> <span style=color:#ae81ff>${{ secrets.GPG_SECRET_KEY }}</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>ORG_GRADLE_PROJECT_signingPassword</span><span style=color:#111>:</span> <span style=color:#ae81ff>${{ secrets.GPG_SECRET_KEY_PASSWORD }}</span>
</span></span></code></pre></div></details><p>Create a file in <code>.github/workflows</code> (in your repository) called <code>publish.yml</code>. This will be run as your GitHub action.</p><p>Use the following contents (with any modifications you need) for that file:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span><span style=color:#111>:</span> <span style=color:#ae81ff>Publish package to Maven Central</span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>release</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>types</span><span style=color:#111>:</span> <span style=color:#111>[</span><span style=color:#ae81ff>created]</span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>publish</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>runs-on</span><span style=color:#111>:</span> <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>permissions</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>contents</span><span style=color:#111>:</span> <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>packages</span><span style=color:#111>:</span> <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>steps</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>            - <span style=color:#f92672>uses</span><span style=color:#111>:</span> <span style=color:#ae81ff>actions/checkout@v3</span>
</span></span><span style=display:flex><span>            - <span style=color:#f92672>name</span><span style=color:#111>:</span> <span style=color:#ae81ff>Set up Java</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>uses</span><span style=color:#111>:</span> <span style=color:#ae81ff>actions/setup-java@v3</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>with</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>java-version</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;11&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>distribution</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;adopt&#34;</span>
</span></span><span style=display:flex><span>            - <span style=color:#f92672>name</span><span style=color:#111>:</span> <span style=color:#ae81ff>Validate Gradle wrapper</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>uses</span><span style=color:#111>:</span> <span style=color:#ae81ff>gradle/wrapper-validation-action@e6e38bacfdf1a337459f332974bb2327a31aaf4b</span>
</span></span><span style=display:flex><span>            - <span style=color:#f92672>name</span><span style=color:#111>:</span> <span style=color:#ae81ff>Publish package</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>uses</span><span style=color:#111>:</span> <span style=color:#ae81ff>gradle/gradle-build-action@0d13054264b0bb894ded474f08ebb30921341cee</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>with</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>arguments</span><span style=color:#111>:</span> <span style=color:#ae81ff>publish</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>env</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>MAVEN_USERNAME</span><span style=color:#111>:</span> <span style=color:#ae81ff>${{ secrets.OSSRH_USERNAME }}</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>MAVEN_PASSWORD</span><span style=color:#111>:</span> <span style=color:#ae81ff>${{ secrets.OSSRH_TOKEN }}</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>ORG_GRADLE_PROJECT_signingKey</span><span style=color:#111>:</span> <span style=color:#ae81ff>${{ secrets.GPG_SECRET_KEY }}</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>ORG_GRADLE_PROJECT_signingPassword</span><span style=color:#111>:</span> <span style=color:#ae81ff>${{ secrets.GPG_SECRET_KEY_PASSWORD }}</span>
</span></span></code></pre></div><h2 id=releasing-the-archive>Releasing the Archive</h2><p>There will be two parts to this final section: creating a release in GitHub and publishing it on nexus repository manager.</p><h4 id=creating-a-github-release>Creating a GitHub Release</h4><p>Go to your GitHub repository and click on the <strong>Releases</strong>.</p><p>If you have none, there will be a button to <strong>Create a new release</strong>. Otherwise there is a button labelled <strong>Draft a new release</strong>.</p><p>Press whichever button is present, and create a new release.</p><p><em>For both the tag and name of release, I recommend just using the current verion number that you have in your <code>build.gradle</code>.</em></p><p>Now, your GitHub action will automatically run!</p><p><strong>If the action fails, try debugging, and if you cannot identify the source of the problem, feel free to leave a comment below and I will try to assist.</strong></p><h4 id=releasing-the-archive-1>Releasing the Archive</h4><p>Navigate back to the <a href=https://s01.oss.sonatype.org/>Nexus Repository Manager</a> and log in.</p><p>In the left-hand menu, click <strong>Staging Repositories</strong> under <strong>Build Promotion</strong>.</p><p><em>If you have already created your release and there is still nothing here after some time, there was likely a problem in the GitHub action.</em></p><p>Click on the item in here; you should recognize it by the group id you registered earlier.</p><p>Now, press <strong>Close</strong> from the menu, and wait a couple minutes for the server to process your archive.</p><p><strong>It should say that all tasks have run successfully, but if anything failed, try to debug first, and if you are unable to identify the source of the problem, feel free to leave a comment below and I will try to assist.</strong></p><p>Assuming that everything was successfully completed, press <strong>Release</strong> and the repository will be published to Maven Central.</p><p>After a while (this can take hours), the package will be available to use.</p><p>To use it, implement the following template (in <code>build.gradle</code>):</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-groovy data-lang=groovy><span style=display:flex><span><span style=color:#111>repositories</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>mavenCentral</span><span style=color:#f92672>()</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>dependencies</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>    <span style=color:#111>implementation</span> <span style=color:#d88200>&#39;&lt;group-id&gt;:&lt;artifact-id&gt;:&lt;version&gt;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Congratulations on making your first package!</p><p>Leave any questions or feedback in the comments below.</p></div></div><script src=https://utteranc.es/client.js repo=We-Gold/We-Gold.github.io issue-term=pathname label=Comment theme=github-light crossorigin=anonymous async></script></div></div><div class=container><div class="row justify-content-between"><div class=col-8><p class=footer>Weaver Goldman Â© 2022</p></div><div class="col-4 d-flex flex-row-reverse"><a class="footer-social px-2" href=https://github.com/We-Gold target=_blank><i class="fab fa-github"></i></a>
<a class="footer-social px-2" href=https://www.linkedin.com/in/weaver-goldman/ target=_blank><i class="fab fa-linkedin-in"></i></a></div></div></div><script src=/js/bootstrap.min.js></script>
<script type=text/javascript src=/js/jquery.min.js></script>
<script src=/js/isotope.pkgd.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js integrity=sha384-GNFwBvfVxBkLMJpYMOABq3c+d3KnQxudP/mGPkzpZSTYykLBNsZEnG2D9G/X/+7D crossorigin=anonymous async></script>
<script src=/js/dark.js></script>
<script src=/js/isotope.js></script>
<script src=/js/custom.js></script>
<script data-goatcounter=https://wegold.goatcounter.com/count async src=//gc.zgo.at/count.js></script></body></html>